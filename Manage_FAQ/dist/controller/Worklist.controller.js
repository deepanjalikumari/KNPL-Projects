sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,i,o,r){"use strict";return e.extend("com.knpl.pragati.Manage_FAQ.controller.Worklist",{formatter:i,onInit:function(){var e,i,o=this.byId("table");i=o.getBusyIndicatorDelay();this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText("worklistTableTitle"),shareOnJamTitle:this.getResourceBundle().getText("worklistTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorklistMessage",[location.href]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText"),tableBusyDelay:0,filterBar:{FAQCategoryId:null}});this.setModel(e,"worklistView");o.attachEventOnce("updateFinished",function(){e.setProperty("/tableBusyDelay",i)})},onUpdateFinished:function(e){var t,i=e.getSource(),o=e.getParameter("total");if(o&&i.getBinding("items").isLengthFinal()){t=this.getResourceBundle().getText("worklistTableTitleCount",[o])}else{t=this.getResourceBundle().getText("worklistTableTitle")}this.getModel("worklistView").setProperty("/worklistTableTitle",t)},onReset:function(){this._ResetFilterBar()},_ResetFilterBar:function(){var e=[];var t={FAQCategoryId:null};var i=this.getView().getModel("oViewModel");i.setProperty("/filterBar",t);var o=this.byId("table");var r=o.getBinding("items");r.filter([])},onPress:function(e){this._showObject(e.getSource())},onNavBack:function(){history.go(-1)},onSearch:function(e){var t=this.getFiltersfromFB(),i=this.getView().byId("table");i.getBinding("items").filter(t);if(t.length!==0){if(t[0].sPath==="FAQCategoryId"){this.getModel("worklistView").setProperty("/FAQCategoryId",t[0].oValue1)}else{this.getModel("worklistView").setProperty("/FAQCategoryId",null)}this.getModel("worklistView").setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}else{this.getModel("worklistView").setProperty("/FAQCategoryId",null)}},getFiltersfromFB:function(){var e=this.getView().byId("filterbar"),t=[];e.getAllFilterItems().forEach(function(e){if(e.getControl().getSelectedKey()){t.push(new o(e.getName(),r.EQ,e.getControl().getSelectedKey()))}});return t},onAdd:function(e){this.getRouter().navTo("createObject")},onRefreshView:function(){var e=this.getModel();e.refresh(true)},onEdit:function(e){this._showObject(e.getSource())},onDelete:function(e){var t=e.getSource().getBindingContext().getPath();function i(){var e=this.getModel().getData(t);this.getModel().update(t,{FAQQuestion:e.FAQQuestion,FAQAnswer:e.FAQAnswer,IsArchived:true},{success:this.showToast.bind(this,"MSG_SUCCESS_FAQ_REMOVE")})}this.showWarning("MSG_CONFIRM_DELETE",i)},onRefresh:function(){var e=this.byId("table");e.getBinding("items").refresh()},_showObject:function(e){this.getRouter().navTo("object",{objectId:e.getBindingContext().getProperty("Id")})},_applySearch:function(e){var t=this.byId("table"),i=this.getModel("worklistView");t.getBinding("items").filter(e,"Application");if(e.length!==0){i.setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}}})});