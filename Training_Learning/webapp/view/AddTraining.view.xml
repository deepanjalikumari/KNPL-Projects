<mvc:View controllerName="com.knpl.pragati.Training_Learning.controller.AddTraining" xmlns:u="sap.ui.unified" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:uxap="sap.uxap" height="100%">
    <Page busy="{oModelView>/busy}" busyIndicatorDelay="0" showNavButton="false" showHeader="true" navButtonPress="navPressBack">
        <headerContent>
            <Bar>
                <contentLeft>
                    <Breadcrumbs currentLocationText="{oModelView>/AddEditTraining}">
                        <Link text="{i18n>TrainingVideo}" press="onCancel"/>
                    </Breadcrumbs>
                </contentLeft>
            </Bar>
        </headerContent>
        <VBox id="idVbxAddTraining" width="100%">
        <f:SimpleForm id="AddTrainingDetails" editable="true" layout="ResponsiveGridLayout" title="{oModelView>/AddEditTrainingDetails}" labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="2" columnsL="2" columnsM="2" singleContainerFullSize="false">
        <f:content>
            <core:Title text="{i18n>TrainingDetails}"/>
                <Label text="{i18n>colTrainingMode}" required="true"/>
                <ComboBox items="{path:'/MasterTrainingTypeSet', filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }" selectedKey="{oModelView>/TrainingDetails/TrainingTypeId}" editable="false">
                    <items>
                        <core:Item text="{TrainingType}" key="{Id}"/>
                    </items>
                </ComboBox>
                <Label text="{i18n>colTrainingType}" required="true"/>
                <ComboBox id="idTrSubType" change="onTrainingTypeChange" items="{path:'/MasterTrainingSubTypeSet', filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }" selectedKey="{oModelView>/TrainingDetails/TrainingSubTypeId}">
                    <items>
                        <core:Item text="{TrainingSubType}" key="{Id}"/>
                    </items>
                </ComboBox>
                <Label text="{i18n>colTitle}" required="true" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
                <Input maxLength="100" value="{oModelView>/TrainingDetails/Title}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>

                <Label text="{i18n>colTrainingDescription}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
                <TextArea value="{oModelView>/TrainingDetails/Description}" rows="5" maxLength="1000" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>

                <Label text="{i18n>colLink}" required="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '3'}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
                <Input maxLength="300" value="{oModelView>/TrainingDetails/Url}" type="Url" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>

                <Label text="{i18n>colStartDateTime}" required="true" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <DateTimePicker width="35%" valueStateText="Enter a valid date and time" minDate="{oModelView>/currDate}" dateValue="{oModelView>/TrainingDetails/StartDate}" valueFormat="yyyy-MM-dd HH:mm:ss" displayFormat="dd MMM yyyy hh:mm a" required="true" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>

                <Label text="{i18n>colEndDateTime}" required="true" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <DateTimePicker width="35%" valueStateText="Enter a valid date and time" minDate="{oModelView>/currDate}" dateValue="{oModelView>/TrainingDetails/EndDate}" valueFormat="yyyy-MM-dd HH:mm:ss" displayFormat="dd MMM yyyy hh:mm a" required="true" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>

                <Label required="true" text="{i18n>colDuration}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '3'}"/>
				<Input width="35%" value="{oModelView>/TrainingDetails/Duration}" maxLength="10" type="Number" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '3'}"/>

                <Label text="{i18n>colRewardPoints}" required="true"/>
                <Input width="35%" value="{oModelView>/TrainingDetails/RewardPoints}" type="Number" editable="false"/>

            <core:Title text="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1' ? 'Target Group' : '' }"/>

                <Label text="{i18n>colZone}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <MultiComboBox visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}" selectionChange="onMultyZoneChange" items="{ path : '/MasterZoneSet', groupHeaderFactory: '.getGroupHeader' }">
					<core:Item key="{Id}" text="{Id}"/>
				</MultiComboBox>

                <Label text="{i18n>colDivision}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <MultiComboBox id="idDivision" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}" selectionChange="onMultyDivisionChange" items="{ path : '/MasterDivisionSet', groupHeaderFactory: '.getGroupHeader' }">
					<core:Item key="{Id}" text="{Id}"/>
				</MultiComboBox>

                <Label text="{i18n>colDepot}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <MultiComboBox id="idDepot" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}" selectionChange="onMultyDepotChange" items="{ path : '/MasterDepotSet', groupHeaderFactory: '.getGroupHeader' }">
					<core:Item key="{Id}" text="{Depot} ( {Id} )"/>
				</MultiComboBox>

                <Label text="{i18n>colPainterType}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <ComboBox visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}" items="{path:'/MasterPainterTypeSet', filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }" selectedKey="{oModelView>/TrainingDetails/PainterType}">
                    <items>
                        <core:Item text="{PainterType}" key="{Id}"/>
                    </items>
                </ComboBox>

                <Label text="{i18n>colPainterArcheType}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}"/>
                <ComboBox visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '1'}" items="{path:'/MasterArcheTypeSet', filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }" selectedKey="{oModelView>/TrainingDetails/PainterArcheId}">
                    <items>
                        <core:Item text="{ArcheType}" key="{Id}"/>
                    </items>
                </ComboBox>

                <Label text="{i18n>colAttendanceFile}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '2'}"/>
                <u:FileUploader id="idAttendanceFileUploader" fileType="csv" width="90%" sameFilenameAllowed="false" placeholder="Choose a CSV file" style="Emphasized" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} === '2'}">
                </u:FileUploader>

                <!-- <Label text="{i18n>colImage}" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
				<u:FileUploader maximumFileSize="2" placeholder="Choose a CSV file" fileAllowed="onUpload" fileType="png,jpg,jpeg" tooltip="{i18n>fileUploaderTrainingtip}" buttonOnly="true" buttonText="{i18n>fileUploaderTrainingtip}" style="Emphasized" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
                <HBox>
                    <ObjectAttribute class="sapUiTinyMargin" title="File Type" text="PNG,JPG,JPEG"/>
                    <ObjectAttribute class="sapUiTinyMargin" title="Max Size" text="2 MB"/>
                </HBox>
                <Image width="5rem" class="sapUiTinyMargin" height="5rem" src="{ parts : [{path : 'oModelView>__metadata'}, { path : 'oModelView>/oImage' } ] , formatter : '.formatter.giveImage' }" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/> -->

                <Label text="Upload Thumbnail Image" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
                <HBox>
                    <VBox>
                        <VBox class="sapUiTinyMarginBottom">
                                <HBox>
                                    <u:FileUploader
                                        width="100%"
                                        tooltip="{i18n>fileUploaderTrainingtip}"
                                        typeMissmatch="handleTypeMissmatch"
                                        fileType="png,jpg,jpeg"
                                        maximumFileSize="2.1"
                                        fileSizeExceed="onFileSizeExceed"
                                        useMultipart="false"
                                        sendXHR="true"
                                        fileAllowed="onUpload"
                                        visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}"/>
                                </HBox>
                                <VBox>
                                    <ObjectAttribute title="File Type" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}" text="PNG,JPG,JPEG"/>
                                    <ObjectAttribute title="Max Size" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}" text="2 MB"/>
                                </VBox>
                                <!-- <Image id="idPreviewImage" width="400px" height="200px" /> -->
                        </VBox>
                                <Button id="imageBtn" icon="sap-icon://attachment-photo" visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}" press="onImageView" text="View Image" class="sapUiTinyMargin increaseFont"/>                    
                    </VBox>                  
                </HBox>

        </f:content>
        </f:SimpleForm>
        </VBox>
        <VBox id="idVbxAddQuestionnaire" width="100%">
        <f:SimpleForm id="AddQuestionnaireDetails" editable="true" layout="ResponsiveGridLayout" labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false">
        <f:content>
                <core:Title text="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2' ? 'Questionnaire' : '' }"/>
                <List visible="{= ${oModelView>/TrainingDetails/TrainingTypeId} !== '2'}" id="AddTrainingListQuestionnaire" enableBusyIndicator="true" headerText="{i18n>Questionnaire}" growing="true"
					items="{path: 'oModelView>/TrainingDetails/TrainingQuestionnaire' , filters : [ { path : 'IsArchived' , operator : 'EQ' , value1 : false } ] }">
					<headerToolbar>
						<Toolbar>
							<ToolbarSpacer/>
				    		<Button press="onAddQuestionnaire" text="{i18n>btnAddQuestionnaire}"/>
						</Toolbar>
					</headerToolbar>
                    <CustomListItem>
                        <VBox renderType="Bare">
                        <Text text=""/>
                            <HBox alignItems="Start" justifyContent="SpaceBetween">
                                <Title text="{oModelView>Question}" class="sapUiSmallMarginBeginEnd" wrapping="true"/>
                                <FlexBox alignItems="Start" justifyContent="End">
				                    <Button icon="sap-icon://edit" press="onEditQuestionnaire" type="Transparent" tooltip="{i18n>Edit}" class="sapUiSmallMarginEnd" />
				                    <Button icon="sap-icon://delete" press="onDeleteQuestionnaire" type="Transparent" tooltip="{i18n>Remove}" />
			                    </FlexBox>
                            </HBox>
                            <VBox items="{oModelView>TrainingQuestionnaireOptions}">
                                <ObjectStatus text="o {oModelView>Option}" state="{= ${oModelView>IsCorrect} ? 'Success' : 'None' }" visible="{= ${oModelView>IsArchived} === false }" class="sapUiSmallMarginBegin"/>
                            </VBox>
                        </VBox>
                    </CustomListItem>
				</List>
        </f:content>
        </f:SimpleForm>
        </VBox>
        <footer>
            <Toolbar>
                <ToolbarSpacer/>
                <Button text="{i18n>btnCancel}" press="onCancel"/>
                <Button text="{i18n>btnSave}" type="Emphasized" press="onSaveTraining"/>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>
