<mvc:View controllerName="com.knpl.pragati.LoyaltyManagement.controller.LandingPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
    xmlns:vm="sap.ui.comp.variants">
    <f:DynamicPage headerExpanded="true" stickySubheaderProvider="idIconTabBar" class="sapUiNoContentPadding">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{i18n>landingPageViewTitle}"/>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <fb:FilterBar id="filterbar" reset="onReset" search="onSearch" useToolbar="false" showGoOnFB="true"> 
                        <fb:filterGroupItems>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Search" label="{i18n>searchFilterLabel}" visibleInFilterBar="true">
                                <fb:control>
                                    <SearchField id="idSearchInput" data:filterName="Search" value="{ViewModel>/filterBar/search}" placeholder="{i18n>searchFilterPlaceholder}" />
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Request Type" label="{i18n>requestTypeFilterLabel}" visibleInFilterBar="true">
                                <fb:control>
                                    <ComboBox id="idRequestTypeInput" selectedKey="all" placeholder="{i18n>requestTypeFilterPlaceholder}">
                                        <core:Item key="all" text="All" />
                                         <core:Item key="accured" text="Accural" />
                                          <core:Item key="redemption" text="Redemption" />
                                    </ComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Status" label="{i18n>statusFilterLabel}" visibleInFilterBar="true">
                                <fb:control>
                                    <ComboBox id="idStatusInput" selectedKey="" placeholder="{i18n>statusFilterPlaceholder}">
                                        <core:Item key="all" text="All" />
                                    </ComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem groupName="__$INTERNAL$" name="Date" label="{i18n>dateFilterLabel}" visibleInFilterBar="true">
                                <fb:control>
                                    <DatePicker id="idDateInput" data:filterName="Creation Date" value="{ViewModel>/filterBar/createdAt}" placeholder="{i18n>dateFilterPlaceholder}"/>
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>

        <!-- DynamicPage Content -->
        <f:content>
            <IconTabBar
                id="idIconTabBar"
                headerMode="Inline"
                expanded="{device>/isNoPhone}"
                class="sapUiResponsiveContentPadding">
                <items>
                    <IconTabFilter
                        text="{i18n>allRequestIconTabarTitle}"
                        key="all">
                        <Table id="idAllRequestTable" width="auto" items="{path: '/PainterPointsHistorySet' ,parameters : {expand:'Painter'}}" noDataText="No Data" growing="true" growingScrollToLoad="true" busyIndicatorDelay="{worklistViewModel>/tableBusyDelay}" updateFinished="onUpdateFinished">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <ToolbarSpacer />
                                    <Button text="{i18n>addPointBtnText}" tooltip="{i18n>addPointBtnTooltip}" type="Transparent" press="onPressAddPointBtn"/>
                                    <Button tooltip="Sort" icon="sap-icon://sort" press="handleSortButtonPressed" />
                                    <Button tooltip="Filter" icon="sap-icon://filter" press="handleFilterButtonPressed" />
                                </OverflowToolbar>
                            </headerToolbar>

                            <columns>
                                <Column>
                                    <Text text="{i18n>tblColName}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColMembershipId}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColPrimaryMobileNo}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColTypeOfRequest}"/>
                                </Column>
                                <Column width="15%" minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColTypeOfAccrualRedemption}"/>
                                </Column>
                                <Column>
                                    <Text text="{i18n>tblColPoints}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColDateTime}"/>
                                </Column>
                                <Column>
                                    <Text text="{i18n>tblColStatus}"/>
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem type="Navigation" press="onListItemPress">
                                    <dependents>
                                        <!-- <core:Fragment fragmentName="com.knpl.pragati.DealerManagement.view.fragments.worklistFragments.ActionSheet" type="XML" /> -->
                                    </dependents>
                                    <cells>
                                        <ObjectIdentifier title="{Painter/Name}" titleActive="true"/>
                                        <Text text="{Painter/MembershipCard}"/>
                                        <Text text="{Painter/Mobile}"/>
                                        <Text text="{PointTransactionType}"/>
                                        <Text text="{PointType}"/>
                                        <Text text="{RewardPoints}"/>
                                        <Text text="{path:'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                                        <Text text="{CustomerClass}"/>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>
                    <IconTabFilter
                        text="{i18n>accrualRequestIconTabarTitle}"
                        key="accrual"
                       >
                        <Table id="idAccrualRequestTable" width="auto" items="{path: '/PainterPointsHistorySet' ,parameters : {expand:'Painter'}}" noDataText="No Data" growing="true" growingScrollToLoad="true" busyIndicatorDelay="{worklistViewModel>/tableBusyDelay}" updateFinished="onUpdateFinished">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <ToolbarSpacer />
                                    <Button tooltip="Sort" icon="sap-icon://sort" press="handleSortButtonPressed" />
                                    <Button tooltip="Filter" icon="sap-icon://filter" press="handleFilterButtonPressed" />
                                </OverflowToolbar>
                            </headerToolbar>

                            <columns>
                                <Column>
                                    <Text text="{i18n>tblColName}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColMembershipId}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColPrimaryMobileNo}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColTypeOfRequest}"/>
                                </Column>
                                <Column width="15%" minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColTypeOfAccrualRedemption}"/>
                                </Column>
                                <Column>
                                    <Text text="{i18n>tblColPoints}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColDateTime}"/>
                                </Column>
                                <Column>
                                    <Text text="{i18n>tblColStatus}"/>
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem type="Navigation" press="onListItemPress">
                                    <cells>
                                        <ObjectIdentifier title="{Painter/Name}" titleActive="true"/>
                                        <Text text="{Painter/MembershipCard}"/>
                                        <Text text="{Painter/Mobile}"/>
                                        <Text text="{PointTransactionType}"/>
                                        <Text text="{PointType}"/>
                                        <Text text="{RewardPoints}"/>
                                        <Text text="{path:'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                                        <Text text="{CustomerClass}"/>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>
                    <IconTabFilter
                        text="{i18n>redemptionRequestIconTabarTitle}"
                        key="redemption"
                        >
                        <Table id="idRedemptionRequestTable" width="auto" items="{path: '/PainterPointsHistorySet' ,parameters : {expand:'Painter'}}" noDataText="No Data" growing="true" growingScrollToLoad="true" busyIndicatorDelay="{worklistViewModel>/tableBusyDelay}" updateFinished="onUpdateFinished">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <ToolbarSpacer />
                                    <Button tooltip="Sort" icon="sap-icon://sort" press="handleSortButtonPressed" />
                                    <Button tooltip="Filter" icon="sap-icon://filter" press="handleFilterButtonPressed" />
                                </OverflowToolbar>
                            </headerToolbar>

                            <columns>
                                <Column>
                                    <Text text="{i18n>tblColName}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColMembershipId}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColPrimaryMobileNo}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColTypeOfRequest}"/>
                                </Column>
                                <Column width="15%" minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColTypeOfAccrualRedemption}"/>
                                </Column>
                                <Column>
                                    <Text text="{i18n>tblColPoints}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>tblColDateTime}"/>
                                </Column>
                                <Column>
                                    <Text text="{i18n>tblColStatus}"/>
                                </Column>
                            </columns>

                            <items>
                                <ColumnListItem type="Navigation" press="onListItemPress">
                                     <cells>
                                        <ObjectIdentifier title="{Painter/Name}" titleActive="true"/>
                                        <Text text="{Painter/MembershipCard}"/>
                                        <Text text="{Painter/Mobile}"/>
                                        <Text text="{PointTransactionType}"/>
                                        <Text text="{PointType}"/>
                                        <Text text="{RewardPoints}"/>
                                        <Text text="{path:'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                                        <Text text="{CustomerClass}"/>
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </f:content>
    </f:DynamicPage>
</mvc:View>
