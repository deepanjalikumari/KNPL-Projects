<mvc:View xmlns:vbm="sap.ui.vbm"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:uxap="sap.uxap"
    xmlns:layout="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns="sap.m" controllerName="com.knpl.pragati.DealerManagement.controller.DealerDetails" height="100%">
        <uxap:ObjectPageLayout id="ObjectPageLayout" showTitleInHeaderContent="true" upperCaseAnchorBar="false" headerContentPinnable="true" toggleHeaderOnTitleClick="true">
            <uxap:headerTitle>
                <uxap:ObjectPageDynamicHeaderTitle>
                    <uxap:breadcrumbs>
                        <Breadcrumbs id="breadcrumbsId" currentLocationText="Dealer Details">
                            <Link text="All Dealers" press="handleAllDealerLinkPress"/>
                        </Breadcrumbs>
                    </uxap:breadcrumbs>

                    <uxap:expandedHeading>
                        <Title text="{Name}" class="sapUiTinyMarginEnd"/>
                    </uxap:expandedHeading>

                    <uxap:snappedHeading>
                        <FlexBox fitContainer="true" alignItems="Center" renderType="Bare">
                            <Avatar class="sapUiTinyMarginEnd"/>
                            <FlexBox direction="Column" renderType="Bare">
                                <Title text="{Name}" wrapping="true"/>
                                <Text text="{Id}"/>
                            </FlexBox>
                        </FlexBox>
                    </uxap:snappedHeading>

                    <uxap:expandedContent>
                        <Text text="{DealerName}"/>
                    </uxap:expandedContent>
                     

                    <uxap:snappedTitleOnMobile>
                        <Title text="{DealerName}"/>
                    </uxap:snappedTitleOnMobile>

                    <!-- <uxap:actions>
                        <Button text="Edit Dealer Details" type="Emphasized" icon="sap-icon://user-edit" iconFirst="true"/>
                    </uxap:actions> -->
                </uxap:ObjectPageDynamicHeaderTitle>


            </uxap:headerTitle>

            <uxap:headerContent>
                <FlexBox wrap="Wrap" height="100%" class="sapUiSmallMarginBottom" renderType="Bare">
                    
                    <Avatar class="sapUiSmallMarginEnd" displaySize="M"/>

                    <FlexBox class="sapUiSmallMarginBeginEnd" alignItems="Start" justifyContent="SpaceAround" direction="Column" wrap="Wrap" renderType="Bare">
                        <items>
                            <!-- <ObjectAttribute title="{i18n>name}" text="{DealerName}"/> -->
                            
                            <ObjectAttribute title="{i18n>depot}" text="{Depot}" />
                             <ObjectAttribute title="{i18n>salesGroupID}" text="{SalesGroupId}"/>
                            <ObjectAttribute title="{i18n>salesGroupName}" text="{SalesGroupName}"/>
                        </items>
                    </FlexBox>

                    <FlexBox class="sapUiSmallMarginBeginEnd" alignItems="Start" justifyContent="SpaceAround" direction="Column" wrap="Wrap" renderType="Bare">
                        <items>
                            <ObjectAttribute title="{i18n>customerName}" text="{CustomerId}"/>
                            <ObjectAttribute title="{i18n>fiscalYear}" text="{FiscalYear}"/>
                            <ObjectAttribute title="{i18n>customerClass}" text="{CustomerClass}"/>
                        </items>
                    </FlexBox>

                    <FlexBox class="sapUiSmallMarginBeginEnd" alignItems="Start" justifyContent="Start" direction="Column" wrap="Wrap" renderType="Bare">
                        <items>
                            <ObjectAttribute title="{i18n>customerCategory}" text="{CustomerCategory}"/>
                        </items>
                    </FlexBox>
                </FlexBox>
            </uxap:headerContent>

            <uxap:sections>
                <uxap:ObjectPageSection titleUppercase="false" title="Painter Linked">
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection>
                            <VBox renderType="Bare">
                            	
                                <Table id="idPainterTable" width="auto" items="{path: 'Painter'}" noDataText="No Data" growing="true" growingThreshold="15" growingScrollToLoad="true" busyIndicatorDelay="{oViewModel>/tableBusyDelay}" updateFinished="onUpdateFinished">
                                    <headerToolbar>
                                        <OverflowToolbar>
                                            <Title text="{oViewModel>/detailPageWorklistTableTitle}" level="H4" class="stdTitleColor"/>
                                            <ToolbarSpacer />
                                            <!-- <Button type="Emphasized" text="Link painters" press="linkPainters" /> -->
                                            <SearchField id="searchField" tooltip="{i18n>worklistSearchTooltip}" search=".onSearch" placeholder="{i18n>worklistSearchTooltip}">
                                                <layoutData>
                                                    <OverflowToolbarLayoutData maxWidth="200px" priority="NeverOverflow"/>
                                                </layoutData>
                                            </SearchField>
                                            <Button tooltip="Sort" icon="sap-icon://sort" press="handleSortButtonPressed" />
                                            <Button tooltip="Filter" icon="sap-icon://filter" press="handleFilterButtonPressed" />
                                            <Button tooltip="group" icon="sap-icon://group-2" press="handleGroupButtonPressed" />
                                            <!-- <Button text="Edit Dealer Details" type="Emphasized" icon="sap-icon://add-employee" iconFirst="true"/> -->
                                        </OverflowToolbar>
                                    </headerToolbar>

                                    <columns>
                                        <Column>
                                            <Text text="{i18n>name}"/>
                                        </Column>
            
                                        <Column>
                                            <Text text="{i18n>membershipId}"/>
                                        </Column>
                                         <Column width="10%">
                                            <Text text="{i18n>mobile}"/>
                                        </Column>
                                        <Column>
                                            <Text text="{i18n>painterId}"/>
                                        </Column>
                                        <Column>
                                            <Text text="{i18n>address}"/>
                                        </Column>
                                        <Column>
                                            <Text text="{i18n>ageGroup}"/>
                                        </Column>
                                        <Column>
                                            <Text text="{i18n>date}"/>
                                        </Column>
                                        
                                        <Column width="10%">
                                            <Text text="{i18n>action}"/>
                                        </Column>
                                    </columns>

                                    <items>
                                        <ColumnListItem  id="idColumnListItem" type="Active" press="onListItemPress">
                                            <dependents>
                                                <core:Fragment fragmentName="com.knpl.pragati.DealerManagement.view.fragments.detailPageFragments.ActionSheet" type="XML" />
                                            </dependents>
                                            <cells>
                                                <ObjectIdentifier title="{Name}" titleActive="true"/>
                                                <Text text="{MembershipCard}"/>
                                                <Text text="{Mobile}"/>
                                                <Text text="{Id}"/>
                                                <Text text="{PainterAddress}"/>
                                                <Text text="{AgeGroup}"/>
                                                <Text  text="{path: 'CreatedAt',formatter:'.formatter.dateFormatter2'}"/>
                                                
                                                <Button text="Unlink" type="Reject" press="changeLinkStatus"></Button>
                                            </cells>
                                        </ColumnListItem>
                                    </items>
                                </Table>
                            </VBox>
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>
            </uxap:sections>
        </uxap:ObjectPageLayout>
</mvc:View>

